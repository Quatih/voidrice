var VaultDeviceLimitDialog=function(e){Dialog.call(this,e,{additionalHeaderClasses:[],dynamicHeight:!0,buttonsInsideContent:!0,closeButtonEnabled:!1,hidePreviousDialogs:!0,overlayDialog:!0,blurOverlay:!0})};VaultDeviceLimitDialog.prototype=Object.create(Dialog.prototype),(VaultDeviceLimitDialog.prototype.constructor=VaultDeviceLimitDialog).prototype.initialize=function(e,f){Dialog.prototype.initialize.apply(this,arguments),function(t){if("/acctsiframe.php"!==location.pathname){var i=document.querySelector("#vaultDeviceLimitDialog .media__figure img"),n=document.querySelector("#vaultDeviceLimitDialog .message"),r=document.querySelector("#vaultDeviceLimitDialog .title"),s=document.getElementById("switchingYourDeviceLink"),a=document.getElementById("lastPassPremiumLink"),o=document.getElementById("setDevice"),c=document.getElementById("paywallUpgradeButton"),l=document.querySelector("#vaultDeviceLimitDialog .device__type"),u=Number(bg.get("g_primary_device_switches_left")),e="Vault Pop Up",g="Desktop";try{localStorage.setItem(bg.get("g_username_hash")+"LPUserHasMetVaultDeviceLimitRestriction",bg.get("g_is_restricted"))}catch(e){}var p=function(){var e=bg.get("g_username_hash")+"LPNotificationSuccessMessage",t;2<u&&(t=Strings.translateString("You switched to computer: %s switches left",u-1)),2===u&&(t=Strings.translateString("You switched to computer: 1 switch left")),1===u&&(t=Strings.translateString("You made the final switch to computer"));try{t&&localStorage.setItem(e,t)}catch(e){}},m=function(){1===u?bg.sendLpImprove("mdpw_last_switch_confirmation_clicked",{Action:"Confirm",CurrentDevice:g,Source:e}):bg.sendLpImprove("mdpw_paywall_clicked",{Action:"Switch",CurrentDevice:g,Source:e,SwitchesLeft:u}),document.getElementById("spinner").classList.remove("is-hidden"),bg.setPrimaryDevice(function(){LPProxy.refreshSites(),p(),location.reload()},function(){document.getElementById("spinner").classList.add("is-hidden"),t.close(),Notifications.displayErrorMessage(Strings.translateString("Something went wrong. We couldn’t switch your device type. Please try again."))})},d=function(){reduxApp&&LPProxy.isExpiredFamilyUser()?(t.close(),reduxApp.setExpiredFamiliesPurchaseFlowType(LPProxy.getFamilyMemberType(),"Multi Device Paywall")):LPVault.upgradeToPremuimAction({self:function(){bg.sendLpImprove("mdpw_paywall_clicked",{feature:"None",action:"Purchase",userType:_userType,product:"Premium",source:"Vault Banner"})},apple:function(){t.close()}})},y=function(){bg.sendLpImprove("mdpw_paywall_clicked",{Action:"Dismiss",CurrentDevice:g,Source:e,SwitchesLeft:u}),t.close(),v(u),bg.get("g_display_premium_retrial_offer")&&setTimeout(function(){LPVault.openRetrialDialog()},1500)};s.style.display="block",a.style.display="none";var h=Strings.translateString("Go Premium for only <currency><price>/month");h=(h=h.replace("<price>",f.price)).replace("<currency>",f.currency),c.innerText=h,c.addEventListener("click",d),o.innerText=Strings.translateString("Switch to computer"),o.addEventListener("click",m),document.getElementById("closeDeviceLimitDialog").addEventListener("click",y);var S=function(){v(-1)},v=function(e){switch(l.style.display="block",e){case 0:r.innerText=Strings.translateString("%s device switches left",0),n.innerHTML=Strings.translateString("%sGo Premium%s for unlimited access on both mobile and computer.","<span>","</span>"),i.src="images/vault_4.0/paywall/switch-device-icon-red-light.png",a.style.display="block",s.style.display="none",c.innerText=Strings.translateString("Cancel"),o.innerText=h,c.removeEventListener("click",d),c.addEventListener("click",y),o.removeEventListener("click",m),o.addEventListener("click",d),reduxApp&&LPProxy.isExpiredFamilyUser()&&(n.innerHTML=Strings.translateString("%sUpgrade to Families or Premium%s for unlimited access on both mobile and computer.","<b>","</b>"),o.innerText=Strings.translateString("Upgrade now"));break;case 1:r.innerText=Strings.translateString("1 device switch left"),reduxApp&&LPProxy.isExpiredFamilyUser()?(n.innerHTML=Strings.translateString("Please take a minute to %sthink about how you use LastPass.%s This is your last switch. %sUpgrade to Families or Premium%s for unlimited access.","<b>","</b>","<b>","</b>"),c.innerText=Strings.translateString("Upgrade now")):n.innerHTML=Strings.translateString("Please take a minute to %sthink about how you use LastPass.%s This is your last switch. Go Premium for unlimited access.","<span>","</span>"),i.src="images/vault_4.0/paywall/switch-device-icon-yellow-light.png",o.removeEventListener("click",m),o.addEventListener("click",S);break;case-1:t.close(),setTimeout(function(){t.open()},250),r.innerText=Strings.translateString("Switch to computer only?"),reduxApp&&LPProxy.isExpiredFamilyUser()?(l.style.display="none",n.innerHTML=Strings.translateString("%sThis is your last opportunity to switch!%s After this switch, you’ll be able to use LastPass for free on computers, but not on mobile devices. %sUpgrade to Families or Premium%s for unlimited access.","<b>","</b>","<b>","</b>"),c.innerText=Strings.translateString("Upgrade now")):n.innerHTML=Strings.translateString("%sThis is your last opportunity to switch!%s After this switch, you’ll be able to use LastPass for free on computers, but not on mobile devices.","<span>","</span>"),i.src="images/vault_4.0/paywall/switch-illustration.png",o.innerText=Strings.translateString("Yes, make the final switch"),o.removeEventListener("click",S),o.addEventListener("click",m);break;case 2:r.innerText=Strings.translateString("%s device switches left",2),reduxApp&&LPProxy.isExpiredFamilyUser()?(n.innerHTML=Strings.translateString("You can switch your device type %s2 more times%s to find the right option for you. %sUpgrade to Families or Premium%s for unlimited access.","<b>","</b>","<b>","</b>"),c.innerText=Strings.translateString("Upgrade now")):n.innerHTML=Strings.translateString("You can switch your device type %s2 more times%s to find the right option for you. Go Premium for unlimited access.","<span>","</span>"),i.src="images/vault_4.0/paywall/switch-device-icon-blue-light.png";break;default:r.innerText=Strings.translateString("%s device switches left",u),reduxApp&&LPProxy.isExpiredFamilyUser()?(n.innerHTML=Strings.translateString("You can only use LastPass for free %son one device type%s. Switch up to %s times to find the right option for you. %sUpgrade to Families or Premium%s for unlimited access.","<b>","</b>",u,"<b>","</b>"),c.innerText=Strings.translateString("Upgrade now")):n.innerHTML=Strings.translateString("You can only use LastPass for free on %sone type of device.%s Switch up to %s times to find the right option for you.","<span>","</span>",u),i.src="images/vault_4.0/paywall/switch-device-icon-blue-light.png"}};v(u)}}(this)};