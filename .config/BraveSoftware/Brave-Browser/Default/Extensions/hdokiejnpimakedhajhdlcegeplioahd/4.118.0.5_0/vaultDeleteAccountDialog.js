var VaultDeleteAccountDialog=function(e){Dialog.call(this,e,{additionalHeaderClasses:[],dynamicHeight:!0,buttonsInsideContent:!0,closeButtonEnabled:!1,hidePreviousDialogs:!0,overlayDialog:!0,blurOverlay:!0})};VaultDeleteAccountDialog.prototype=Object.create(Dialog.prototype),(VaultDeleteAccountDialog.prototype.constructor=VaultDeleteAccountDialog).prototype.initialize=function(e,t){Dialog.prototype.initialize.apply(this,arguments),function(e){var t=bg.get("g_username"),o=document.getElementById("DA_closeDialog"),n=document.getElementById("DA_email"),s=document.getElementById("DA_password"),r=document.getElementById("DA_showPasswordButton"),a=document.getElementById("DA_hidePasswordIcon"),l=document.getElementById("DA_showPasswordIcon"),i=document.getElementById("DA_cancelButton"),c=document.getElementById("DA_deleteButton"),d=document.getElementById("DA_passwordErrorMessage"),u=document.getElementById("DA_errorMessage"),g=document.getElementById("DA_errorMessageLabel"),m={install:document.getElementById("DA_reason_install"),forgot:document.getElementById("DA_reason_forgot"),usability:document.getElementById("DA_reason_usability"),function:document.getElementById("DA_reason_function"),feature:document.getElementById("DA_reason_feature"),security:document.getElementById("DA_reason_security"),import:document.getElementById("DA_reason_import"),other:document.getElementById("DA_reason_other")},y=document.getElementById("DA_reason_text");n.placeholder=Strings.translateString("Enter account email"),n.value=t,s.placeholder=Strings.translateString("Enter master password"),y.placeholder=Strings.translateString("Any additional feedback for us?"),y.disabled=!m.other.checked,c.disabled=!0;var p=function(){var e={};for(var t in m)m[t].checked&&(e[t]="on");return e},D=function(){return m.other.checked?y.value:""},E="",_=function(){m.other.checked?(y.value=E,y.disabled=!1):(E=y.value,y.value="",y.disabled=!0)},h=function(){d.classList.add("show-error"),s.classList.add("show-error")},f=function(e){B(),g.innerHTML=e,u.classList.add("show-error")},v=function(){d.classList.remove("show-error"),s.classList.remove("show-error")},A=function(){v(),u.classList.remove("show-error")},I=function(e){var t=""===e.target.value;(c.disabled=t)?h():v()},B=function(){s.value="",h()},b=function(){s.type="text",a.style.display="none",l.style.display="block"},w=function(){s.type="password",a.style.display="block",l.style.display="none"},L=function(){"password"===s.type?b():w()},S=function(){B(),w(),A(),e.close()},k=function(){A();var t=LPRequest.getNewRequestID();Topics.get(Topics.REQUEST_START).publish({requestID:t}),bg.LPPlatform.deleteAccount({username:n.value,password:s.value,reasons:p(),reasontext:D(),successCallback:function(e){e.success?(Topics.get(Topics.REQUEST_SUCCESS).publish({requestID:t}),LPProxy.logout()):e.errortxt&&(Topics.get(Topics.REQUEST_ERROR).publish({requestID:t}),f(e.errortxt))}})};s.addEventListener("input",I),r.addEventListener("click",L),m.other.addEventListener("input",_),o.addEventListener("click",S),i.addEventListener("click",S),c.addEventListener("click",k)}(this)};